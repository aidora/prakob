<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Aiyara Cluster :: Prakob</title>
  <style>
    html, body {
      height: 100%;
    }
    body {
      background-color: #fff;
      font-family: sans-serif;
      margin-top: 0;
      margin-bottom: 0;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
    iframe {
      width: 100%;
      height: 100%;
      border-style: solid;
      border-color: #ddd;
      border-width: 0 1px 1px 0;
    }
  </style>
  <script type="text/javascript" src="/jquery.js"></script>
</head>
<body>
  <table width="100%" height="99%">
    <tr>
      <td>
        <div style="display: table;">
          <img style="display: table-cell; vertical-align: middle;" src="media/sut.png"></img>
          <h1 style="display: table-cell; vertical-align: middle;">Aiyara Cluster :: Prakob (ประกอบ)</h1>
        </div>
        <div>
          <input type="text" id="workspace"></input>
          <button onclick="doLoad();">Load</button>
          <button onclick="doSave();">Save</button>
          <span> | </span>
          <button onclick="doClear();">Clear</button>
          <span> | </span>
          <button onclick="doDeploy();">Deploy</button>
          <button onclick="doStop();">Stop</button>
        </div>
        <script type="text/javascript">
          function doSave() {
            var dom = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);
            var xmlText = Blockly.Xml.domToPrettyText(dom);
            var wk = $('#workspace').val();
            $.post("/save", {xml: xmlText, workspace: wk}, function(data){
              alert(data);
            });
          }

          function doLoad() {
            var wk = $('#workspace').val();
            $.get("/load/" + wk, function(data){
              var xml = Blockly.Xml.textToDom(data);
              Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xml);
            });
          }

          function doClear() {
            Blockly.mainWorkspace.clear();
          }

        </script>
      </td>
    </tr>
    <tr>
      <td height="99%">
        <script>
          function blocklyLoaded(blockly) {
            window.Blockly = blockly;
          }
        </script>
        <iframe src="frame.html"></iframe>
      </td>
    </tr>
  </table>

</body>
</html>
